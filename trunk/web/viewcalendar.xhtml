<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      xmlns:ace="http://www.icefaces.org/icefaces/components"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

    <body>
        <link href="#{resource['css:default.css']}" rel="stylesheet" type="text/css" />


        <ui:composition template="./WEB-INF/facelets/templates/plantillalogueado.xhtml">

            <ui:define name="title">
                Calendario - CreativeMeetings
            </ui:define>

            <ui:define name="logoempresa">
                logoempresa
            </ui:define>

            <ui:define name="left">

            </ui:define>

            <ui:define name="right">

            </ui:define>

            <ui:define name="content">

                <ice:form id="formulariocalendario">
                    <div id="calendario">
                        <ice:selectOneMenu value="#{calendarioUsuarioBean.anio}" >
                            <f:selectItems value="#{calendarioUsuarioBean.listaanios}" ></f:selectItems>
                        </ice:selectOneMenu> 
                        <ice:commandButton action="#{calendarioUsuarioBean.irAnio}" value="Cambiar a&ntilde;o"></ice:commandButton>
                        <ice:selectInputDate  styleClass="calendarioReuniones"  id="anoreunion" partialSubmit="true"
                                              required="true" renderMonthAsDropdown="true" renderYearAsDropdown="false" 
                                              highlightClass="antonio: juan: juan" highlightUnit="DAY_OF_WEEK: MONTH: DAY_OF_YEAR" 
                                              highlightValue="1,7: 8: #{calendarioUsuarioBean.reunionescadena}" value="#{calendarioUsuarioBean.fecha}">
                            <f:converter converterId="javax.faces.DateTime"/> 
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </ice:selectInputDate>
                    </div>

                    <ice:commandButton value="Información Reunión" action="#{calendarioUsuarioBean.informacionReunion}"/>
                    <ice:panelGroup rendered="#{calendarioUsuarioBean.verinformacion==true}">
                        <ice:panelGroup>
                            <table>
                                <tr>
                                    <td colspan="1">

                                        <ice:outputText value="Fecha: " ></ice:outputText>
                                        <ice:outputText value="#{calendarioUsuarioBean.formatoFecha(calendarioUsuarioBean.reunion.fechainicial)}" ></ice:outputText>
                                    </td>
                                <!-- por aqui voy-->
                                <td colspan="3">
                                    <ice:outputText value="Sala: " />
                                    <ice:outputText value="#{reunion.getIdsalareunion().nombresala} - " />
                                    <ice:outputText value="#{reunion.getIdsalareunion().direccion} - " />
                                    <ice:outputText value="#{reunion.getIdsalareunion().localidad} (#{reunion.getIdsalareunion().provincia}) - " />
                                    <ice:outputText value="#{reunion.getIdsalareunion().pais} " />
                                </td>
                            </tr> 
                            <tr>
                                <td colspan="1">
                                    <ice:outputText value="Duración: " />
                                    <ice:outputText value="#{verNotificacionesAEBean.calcularDuracionReunion(i.index)}"></ice:outputText>
                                </td>
                                <td colspan="3">
                                    <ice:outputText value="Solicitante: " />
                                    <ice:outputText value="#{reunion.dnicreador.nombre} " />
                                    <ice:outputText value="#{reunion.dnicreador.apellido1} " />
                                    <ice:outputText value="#{reunion.dnicreador.apellido2} - " />
                                    <ice:outputText value="#{reunion.dnicreador.nif.razonsocial}" />
                                </td>
                            </tr> 
                            <tr>
                                <td colspan="2">
                                    <ice:outputText value="Asistentes: " />
                                </td>
                                <td colspan="2">
                                    <ice:outputText value="Puntos del día: " /><br/>   
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <ice:panelSeries varStatus="u" var="usuarios" value="#{reunion.asistenciareunionCollection}">
                                        <ice:outputText value="- #{usuarios.dni.nombre} " />
                                        <ice:outputText value="#{usuarios.dni.apellido1} " />
                                        <ice:outputText value="#{usuarios.dni.apellido2}" /><br/>
                                    </ice:panelSeries>
                                </td>
                                <td colspan="2">
                                    <ice:panelSeries varStatus="p" var="puntosdia" value="#{reunion.puntosdeldiaCollection}">
                                        <ice:outputText value="#{p.index+1}.- #{puntosdia.titulopunto}" /><br/>
                                    </ice:panelSeries>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <ice:commandButton id="aceptareunion" action="#{verNotificacionesAEBean.aceptaReunion(indice.index)}" value="Aceptar invitación"  />
                                </td>

                                <td colspan="2">
                                    <ice:commandButton id="rechazareunion" action="#{verNotificacionesAEBean.rechazaReunion(indice.index)}" value="Rechazar invitación"  />    
                                </td>

                            </tr>
                            </table>
                        </ice:panelGroup>

                    </ice:panelGroup>
                </ice:form>
            </ui:define>

        </ui:composition>

    </body>
</html>
