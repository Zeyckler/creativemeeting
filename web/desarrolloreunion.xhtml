<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html">

    <body>



        <ui:composition template="./WEB-INF/facelets/templates/plantillalogueado.xhtml">


            <ui:define name="sesion">
                <c:if test="#{privilegiosBean.compruebaPrivilegiosSesion()==0 or privilegiosBean.compruebaPrivilegiosSesion()==1 or privilegiosBean.compruebaPrivilegiosSesion()==2  }">
                    #{usuario.creaDesarrolloReunion()}
                </c:if>

            </ui:define>

            <ui:define name="title">
                Desarrollo Reuni√≥n - CreativeMeetings
            </ui:define>

            <ui:define name="logoempresa">
                logoempresa

            </ui:define>

            <ui:define name="left">
                left
            </ui:define>

            <ui:define name="right">

            </ui:define>

            <ui:define name="content">
                <ice:form>


                </ice:form>

                <ice:form styleClass="form-inline">
                    <div id="panelsuperior">

                        <div id="panelhoras" style="float: left;">
                            <div class="clearfix">
                                <ice:outputLabel value="Hora de inicio" for="horainicio"/>
                                <ice:inputText styleClass="horainicio"  id="horainicio" value="#{desarrolloReunionBean.reunion.fechainicialreal}"><f:convertDateTime  pattern="HH:mm:ss"/></ice:inputText>
                            </div>

                            <div class="clearfix">
                                <ice:outputLabel value="Hora de final" for="horafinal"/>
                                <ice:inputText styleClass="horafinal" id="horafinal" value="#{desarrolloReunionBean.reunion.fechafinalestimada}"><f:convertDateTime pattern="HH:mm:ss"/></ice:inputText>
                            </div>

                            <div class="clearfix">
                                <ice:outputLabel value="Tiempo transcurrido" for="tiempo"/>
                                <ice:inputText styleClass="tiempotranscurrido" id="tiempo" value="00:00:00"/>
                            </div>

                            <div class="clearfix">
                                <ice:outputLabel value="Tiempo restante" for="tiemporestante"/>
                                <ice:inputText styleClass="tiemporestante" id="tiemporestante" value="00:00:00"/>
                            </div>
                        </div>
                    </div>
                    <ice:dataTable var="asistentes" value="#{desarrolloReunionBean.usuariosasistentesconf}" styleClass="table table-bordered table-striped" >
                        <ice:column>
                            <f:facet name="header">Nombre</f:facet>
                            <ice:outputText styleClass="nombreasist" value="#{asistentes.nombre}" />   
                        </ice:column>
                        <ice:column>
                            <f:facet name="header">Apellido 1</f:facet>
                            <ice:outputText styleClass="apellido1asist" value="#{asistentes.apellido1}" /> 
                        </ice:column>
                        <ice:column>
                            <f:facet name="header">Apellido 2</f:facet>    
                            <ice:outputText styleClass="apellido2asist" value="#{asistentes.apellido2}" />
                        </ice:column>
                        <ice:column>
                            <f:facet name="header">Salario</f:facet>    
                            <ice:outputText styleClass="salarioasist" value="#{asistentes.salario}" />
                        </ice:column>
                        <ice:column>
                            <f:facet name="header">Coste</f:facet>
                            <ice:outputText styleClass="costeasist #{asistentes.nif.razonsocial}" value="0" />
                        </ice:column>
                    </ice:dataTable>
                    <ice:dataTable var="empresas" value="#{desarrolloReunionBean.empresasasistentes}" styleClass="table table-bordered table-striped" >
                        <ice:column>
                            <f:facet name="header">Nombre empresa</f:facet>
                            <ice:outputText styleClass="empresasAsis" value="#{empresas.razonsocial}" />   
                        </ice:column>
                        <ice:column>
                            <f:facet name="header">Coste</f:facet>
                            <ice:outputText styleClass="cos#{empresas.razonsocial}" value="0" />
                        </ice:column>
                    </ice:dataTable>
                    <h3>Puntos del d&iacute;a</h3>
                    <ice:panelSeries value="#{desarrolloReunionBean.reunion.puntosdeldiaCollection}" var="puntos" varStatus="indice">
                        <table>
                            <td>
                                <tr>
                                    <ice:outputText value="#{puntos.titulopunto}"/>
                                </tr>
                                <tr>
                                    <ice:commandButton action="#{desarrolloReunionBean.empezarPuntoDia(indice.index)}" disabled="#{desarrolloReunionBean.visibilidadAceptar(indice.index)}" value="Empezar punto"/>
                                </tr>
                                <tr>
                                    <ice:commandButton action="#{desarrolloReunionBean.terminarPuntoDia(indice.index)}" disabled="#{desarrolloReunionBean.visibilidadRechazar(indice.index)}" value="Terminar punto" />
                                </tr>
                                
                            </td>
                        </table>
                    </ice:panelSeries>
                    <ice:panelGroup rendered="#{desarrolloReunionBean.puntoactual!= null}">
                        <h3>Intervenciones:</h3>
                        <ice:outputText value="Seleccione el autor de la intervencion"/>
                        <h4>Punto del dia actual: #{desarrolloReunionBean.puntoactual.titulopunto}</h4>
                        <ice:inputRichText></ice:inputRichText>
                    
                    
                    </ice:panelGroup>

                    <script type="text/javascript">
                       diferenciarestante();
                       contador();
                       costes();
                       costeEmpresas();
                    </script>










                </ice:form>
            </ui:define>

        </ui:composition>

    </body>
</html>
